<script src="https://cdn.jsdelivr.net/npm/appwrite@7.0.0"></script>

<button onclick="registerFinn()">Register Finn</button>
<button onclick="registerEmil()">Register Emil</button>
<button onclick="loginFinn()">Login Finnus</button>
<button onclick="loginEmil()">Login Emilus</button>
<button onclick="createPostCall()">Create Post</button>
<button onclick="createCommentCall()">Create Comment</button>
<button onclick="deletePostCall()">Delete Post</button>
<button onclick="deleteCommentCall()">Delete Comment</button>
<button onclick="likePostCall()">Like Post</button>
<button onclick="unlikePostCall()">Unlike Post</button>

<script>
    // Init your Web SDK
    const sdk = new Appwrite();
    sdk
        .setEndpoint('https://appwrite.berlin-fn.de/v1') // Your Appwrite Endpoint
        .setProject('pixlr') // Your project ID
        ;

    function registerFinn() {
        // Register User
        sdk
            .account.create('unique()', 'finn@finn.de', 'password', 'Finnus')
            .then(response => {
                console.log(response);
            }, error => {
                console.log(error);
            });
    }

    function registerEmil() {
        // Register User
        sdk
            .account.create('unique()', 'emil@emil.de', 'password', 'Emilus')
            .then(response => {
                console.log(response);
            }, error => {
                console.log(error);
            });
    }

    function loginFinn() {
        let promise = sdk.account.createSession('finn@finn.de', 'password');

        promise.then(function (response) {
            console.log(response); // Success
        }, function (error) {
            console.log(error); // Failure
        });
    }

    function loginEmil() {
        let promise = sdk.account.createSession('emil@emil.de', 'password');

        promise.then(function (response) {
            console.log(response); // Success
        }, function (error) {
            console.log(error); // Failure
        });
    }

    async function createCommentCall() {
            let data = {
                content: "Neuer Comment",
                post_id: "62603a243be27745d0ac"
            }
            let response;
            try {
                response = await sdk.functions.createExecution('create_comment', JSON.stringify(data), false);
            } catch (err) {
                console.error(err);
            }

            response = JSON.parse(response.stdout);
            console.log("status: "+ response.statusCode);
            if (response.statusCode > 299 || response.statusCode < 200) {
                console.error(response.error);
            }
    }

    async function createPostCall() {
        let data = {
            title: "Test Richtig",
            image64: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAmUlEQVRYR+2U0QrAIAhF6/8/ehEsEFFbmriHu7eNyOPZ1d6Kn15cvwEABn5r4HmnIx2QF1iF+XSmgUgAUrEJRr/zd/c64ZfOi7RuadE0AEv1DsCVmxOtGgDNzXFWogCurmlgIgDrnuOubwNYwd1Ox9cpoKq59tBEaIvI2g/STnBb0JZO2Sbc/rPbB0IJvgEDABiAARiAgXIDA8+lIyGuoOHuAAAAAElFTkSuQmCC"
        }

        let response;
        try {
            response = await sdk.functions.createExecution('create_post', JSON.stringify(data), false);
        } catch (err) {
            console.error(err);
        }

        response = JSON.parse(response.stdout);
        console.log("status: "+ response.statusCode);
        if (response.statusCode > 299 || response.statusCode < 200) {
            console.error(response.error);
        }
        console.log(response);
    }

    async function deletePostCall() {
        let data = {
            post_id: "62603dbed9de42aff41c"
        }

        let response;
        try {
            response = await sdk.functions.createExecution('delete_post', JSON.stringify(data), false);
        } catch (err) {
            console.error(err);
        }

        response = JSON.parse(response.stdout);
        console.log("status: "+ response.statusCode);
        if (response.statusCode > 299 || response.statusCode < 200) {
            console.error(response.error);
        }
        console.log(response);
    }

    async function deleteCommentCall() {
        let data = {
            comment_id: "6264401784e9b43a5eda"
        }

        let response;
        try {
            response = await sdk.functions.createExecution('delete_comment', JSON.stringify(data), false);
        } catch (err) {
            console.error(err);
        }

        response = JSON.parse(response.stdout);
        console.log("status: "+ response.statusCode);
        if (response.statusCode > 299 || response.statusCode < 200) {
            console.error(response.error);
        }
        console.log(response);
    }

    async function likePostCall() {
        let data = {
            post_id: "62643957724e4539b10c"
        }

        let response;
        try {
            response = await sdk.functions.createExecution('like_post', JSON.stringify(data), false);
        } catch (err) {
            console.error(err);
        }

        response = JSON.parse(response.stdout);
        console.log("status: "+ response.statusCode);
        if (response.statusCode > 299 || response.statusCode < 200) {
            console.error(response.error);
        }
        console.log(response);
    }

    async function unlikePostCall() {
        let data = {
            post_id: "62643957724e4539b10c"
        }

        let response;
        try {
            response = await sdk.functions.createExecution('unlike_post', JSON.stringify(data), false);
        } catch (err) {
            console.error(err);
        }

        response = JSON.parse(response.stdout);
        console.log("status: "+ response.statusCode);
        if (response.statusCode > 299 || response.statusCode < 200) {
            console.error(response.error);
        }
        console.log(response);
    }
</script>